# TODO LIST - Implementasi HRIS Sederhana

> Dokumen ini berisi checklist tugas untuk implementasi aplikasi HRIS Sederhana
> Berdasarkan RANCANGAN.md, BUSINESS_REQUIREMENT.md, FRS_FUNCTIONAL_REQUIREMENT.md, dan IMPLEMENTATION_PLAN.md

---

## Progress Overview

| Phase | Sprint | Status | Progress |
|-------|--------|--------|----------|
| Phase 1: Foundation | Sprint 1-2 | âœ… Completed | 100% |
| Phase 2: Master Data | Sprint 3-4 | âœ… Completed | 100% |
| Phase 3: Lecturer Data | Sprint 5-6 | ğŸ”„ In Progress | 60% |
| Phase 4: Shift Management | Sprint 6 | âœ… Completed | 100% |
| Phase 5: Attendance | Sprint 7 | â¸ï¸ Not Started | 0% |
| Phase 6: Leave Management | Sprint 8 | â¸ï¸ Not Started | 0% |
| Phase 7: Payroll Karyawan | Sprint 9 | â¸ï¸ Not Started | 0% |
| Phase 8: Payroll Dosen | Sprint 10 | â¸ï¸ Not Started | 0% |
| Phase 9: Activity Logging | Sprint 11 | â¸ï¸ Not Started | 0% |
| Phase 10: Testing & UAT | Sprint 12 | â¸ï¸ Not Started | 0% |

---

## Phase 1: Foundation (Sprint 1-2)

### Sprint 1: Foundation & Authentication âœ… COMPLETED

#### Backend Setup
- [x] **S1-01**: Initialize SpringBoot project âœ…
  - [x] Create Maven project with SpringBoot 3.x âœ…
  - [x] Add dependencies (Web, Data JPA, Thymeleaf, Validation, MySQL, Lombok) âœ…
  - [x] Setup folder structure (com.hris.*) âœ…
  - [x] Configure application.yml (database, server port, file upload) âœ…
  - [x] Create HrisApplication.java âœ…

- [x] **S1-02**: Setup database & Flyway âœ…
  - [x] Create MySQL database: hris_db âœ…
  - [x] Configure datasource in application.yml âœ…
  - [x] Add Flyway dependency âœ…
  - [x] Create db/migration folder âœ…
  - [x] Create V1__init_schema.sql, V2__insert_default_data.sql, V3__insert_all_roles_user.sql, V4__fix_passwords.sql âœ…

- [x] **S1-03**: Implement Spring Security âœ…
  - [x] Add Spring Security dependency âœ…
  - [x] Create SecurityConfig.java âœ…
  - [x] Configure password encoder (BCrypt) âœ…
  - [x] Create CustomUserDetailsService implementation âœ…
  - [x] Create CustomAuthenticationProvider âœ…
  - [x] Configure authentication rules âœ…

#### Frontend Setup
- [x] **S1-04**: Create base layout template âœ…
  - [x] Create templates/layout/main.html (Glassmorphism design) âœ…
  - [x] Create templates/fragments/header.html âœ…
  - [x] Create templates/fragments/sidebar.html âœ…
  - [x] Create templates/fragments/footer.html âœ…
  - [x] Setup Tailwind CSS (PostCSS CLI build) âœ…
  - [x] Setup Alpine.js (esbuild) âœ…

- [x] **S1-05**: Implement Login page âœ…
  - [x] Create templates/auth/login.html âœ…
  - [x] Create AuthController.java (login, logout) âœ…
  - [x] Implement login validation âœ…
  - [x] Add error handling âœ…

- [x] **S1-06**: Implement Role Selection page âœ…
  - [x] Create templates/auth/role-selection.html âœ…
  - [x] Create role selection logic in AuthController âœ…
  - [x] Store selected_role in session âœ…

- [x] **S1-07**: Implement UserSession & session management âœ…
  - [x] Configure session timeout (30 minutes) âœ…
  - [x] Add session timeout handling âœ…

#### Testing
- [x] **S1-08**: Unit testing âœ…
  - [x] Test authentication flow (login with admin & allroles users) âœ…
  - [x] Test role selection âœ…
  - [x] Test session management âœ…
  - [x] Test password hashing âœ…

- [x] **S1-09**: Code review & refinement âœ…

---

### Sprint 2: Dashboard & User Management âœ… COMPLETED

#### Base Entities & Enums
- [x] **S2-01**: Create Base Entities âœ…
  - [x] Create BaseEntity.java (created_at, updated_at) âœ…
  - [x] Create SoftDeleteEntity.java (deleted_at, deleted_by) âœ…
  - [x] Create AuditableEntity.java (extends BaseEntity + created_by, updated_by) âœ…

- [x] **S2-02**: Create Enums âœ…
  - [x] RoleType.java (ADMIN, HR, EMPLOYEE, DOSEN) âœ…
  - [x] Gender.java (MALE, FEMALE) âœ…
  - [x] EmployeeStatus.java (ACTIVE, INACTIVE, RESIGNED, FIRED) âœ…
  - [x] EmploymentStatus.java (PERMANENT, CONTRACT, PROBATION, DAILY) âœ…
  - [x] MaritalStatus.java (SINGLE, MARRIED, DIVORCED, WIDOWED) âœ…
  - [x] CompanyType.java (COMPANY, UNIVERSITY, SCHOOL, OTHER) âœ…
  - [x] LecturerEmploymentStatus.java (DOSEN_TETAP, DOSEN_TIDAK_TETAP) âœ…
  - [x] LecturerWorkStatus.java (ACTIVE, LEAVE, RETIRED) âœ…
  - [x] LecturerRank.java (ASISTEN_AHLI, LEKTOR, LEKTOR_KEPALA, PROFESOR) âœ…
  - [x] AttendanceStatus.java (PRESENT, LATE, LEAVE, SICK, ABSENT) âœ…
  - [x] LeaveType.java (ANNUAL, SICK, MATERNITY, MARRIAGE, SPECIAL, UNPAID) âœ…
  - [x] LeaveRequestStatus.java (PENDING, APPROVED, REJECTED) âœ…
  - [x] PayrollStatus.java (DRAFT, PAID) âœ…
  - [x] ActivityType.java (14 activity types) âœ…

#### Dashboard
- [x] **S2-03**: Create DashboardController âœ…
  - [x] Implement getDashboardPage() based on role âœ…
  - [x] Create DashboardService âœ…

- [x] **S2-04**: Implement Admin Dashboard âœ…
  - [x] Create templates/dashboard/admin.html âœ…
  - [x] Stat cards: total employees, total lecturers, pending leaves âœ…
  - [x] Quick actions menu âœ…
  - [x] Recent activities table âœ…

- [x] **S2-05**: Implement HR Dashboard âœ…
  - [x] Create templates/dashboard/hr.html âœ…
  - [x] Stat cards specific for HR âœ…
  - [x] Pending approvals section âœ…

- [x] **S2-06**: Implement Employee Dashboard âœ…
  - [x] Create templates/dashboard/employee.html âœ…
  - [x] Clock in/out buttons âœ…
  - [x] My attendance summary âœ…
  - [x] My leave balance âœ…

- [x] **S2-07**: Implement Dosen Dashboard âœ…
  - [x] Create templates/dashboard/dosen.html âœ…
  - [x] Similar to employee + lecturer specific info âœ…

#### User Management
- [x] **S2-08**: Create User models âœ…
  - [x] Create Employee.java (with all fields from RANCANGAN.md) âœ…
  - [x] Create EmployeeRole.java âœ…
  - [x] Create repositories: EmployeeRepository, EmployeeRoleRepository âœ…

- [x] **S2-09**: Implement User Management (Admin only) âœ…
  - [x] Create UserService âœ…
  - [x] Create UserController âœ…
  - [x] Templates: user list, user form, assign role modal âœ…
  - [x] Create user, edit user, assign roles, reset password, activate/deactivate âœ…

- [x] **S2-10**: Unit testing & integration test âœ…

---

## Phase 2: Master Data (Sprint 3-4) âœ… COMPLETED

### Sprint 3: Company & Department Management âœ… COMPLETED

#### Company Management âœ… COMPLETED
- [x] **S3-01**: Create Company model âœ…
  - [x] Create Company.java (singleton, all fields from RANCANGAN.md) âœ…
  - [x] Create CompanyRepository âœ…
  - [x] Create CompanyService âœ…
  - [x] Create CompanyController âœ…

- [x] **S3-02**: Implement Company Profile page âœ…
  - [x] Create templates/company/profile.html (view only) âœ…
  - [x] Display company information âœ…
  - [x] Show working hours configuration âœ…

- [x] **S3-03**: Implement Company Edit page âœ…
  - [x] Create templates/company/form.html (create & edit form) âœ…
  - [x] Form to edit company data âœ…
  - [x] Logo upload functionality âœ…
  - [x] Stamp upload functionality âœ…
  - [x] Add company menu to sidebar âœ…
  - [x] File serving controller for images âœ…

- [x] **S3-04**: Initialize default company data âœ…
  - [x] Create Flyway migration V11__insert_default_company.sql âœ…
  - [x] Add validation: only 1 company record allowed âœ…

#### Department Management âœ… COMPLETED
- [x] **S3-05**: Create Department model âœ…
  - [x] Create Department.java (with is_prodi, kode_prodi) âœ…
  - [x] Add parent_id for hierarchical structure âœ…
  - [x] Add head_id for department head âœ…
  - [x] Add helper methods (getParentChain, getLevel, etc.) âœ…
  - [x] Create DepartmentRepository âœ…
  - [x] Create DepartmentService âœ…
  - [x] Create DepartmentController âœ…

- [x] **S3-06**: Implement Department CRUD âœ…
  - [x] Create templates/department/list.html (tree view) âœ…
  - [x] Create templates/department/form.html âœ…
  - [x] List departments with employee count âœ…
  - [x] Create, edit, delete (soft delete) department âœ…
  - [x] Mark department as Prodi (is_prodi flag) âœ…
  - [x] Set parent department âœ…
  - [x] Set department head âœ…
  - [x] Add server-side validation âœ…
  - [x] Add success/error alerts âœ…
  - [x] Add delete confirmation modal âœ…

- [x] **S3-07**: Unit testing âœ…

---

### Sprint 4: Position & Employee Management âœ… COMPLETED

#### Position Management âœ… COMPLETED
- [x] **S4-01**: Create Position model âœ…
  - [x] Create Position.java (with base_salary) âœ…
  - [x] Add level field (1-6 hierarchy) âœ…
  - [x] Add helper methods (isAtLeast, isAtMost, getLevelName) âœ…
  - [x] Add Level enum âœ…
  - [x] Create PositionRepository âœ…
  - [x] Create PositionService âœ…
  - [x] Create PositionController âœ…

- [x] **S4-02**: Implement Position CRUD âœ…
  - [x] Create templates/position/list.html âœ…
  - [x] Create templates/position/form.html âœ…
  - [x] List positions with salary range and level âœ…
  - [x] Create, edit, delete (soft delete) position âœ…
  - [x] Add Indonesian salary format (1.000.000,00) âœ…
  - [x] Add server-side validation âœ…
  - [x] Add success/error alerts âœ…
  - [x] Layout consistency with department list âœ…

#### Employee Management âœ… COMPLETED
- [x] **S4-03**: Complete Employee model âœ…
  - [x] Add all fields from RANCANGAN.md section 5.2 âœ…
  - [x] Data identitas: nik, full_name, place_of_birth, date_of_birth, gender, mothers_name âœ…
  - [x] Data alamat & kontak: address, phone, email âœ…
  - [x] Data kepegawaian: employment_status, hire_date, work_location âœ…
  - [x] Data BPJS: bpjs_ketenagakerjaan_no, bpjs_kesehatan_no, npwp âœ…
  - [x] Data gaji: basic_salary âœ…
  - [x] Data keluarga: kk_number, marital_status, spouse_name, number_of_dependents âœ…
  - [x] Status fields: status, resignation_date, resignation_reason âœ…
  - [x] Soft delete support âœ…
  - [x] Add approver_id for approval workflow âœ…
  - [x] Add helper methods (isDepartmentHead, isManagerOrAbove, getApprovalChain) âœ…

- [x] **S4-04**: Create EmployeeRepository with custom queries âœ…
  - [x] findByEmailAndDeletedAtIsNull() âœ…
  - [x] findByNikAndDeletedAtIsNull() âœ…
  - [x] findByDepartmentIdAndDeletedAtIsNull() âœ…
  - [x] findByStatusAndDeletedAtIsNull() âœ…
  - [x] findAllActiveEmployees() âœ…
  - [x] hasRole(employeeId, role) âœ…
  - [x] findByRole(role) âœ…
  - [x] searchEmployees() with pagination âœ…

- [x] **S4-05**: Create EmployeeService âœ…
  - [x] CRUD operations âœ…
  - [x] Soft delete implementation âœ…
  - [x] Validation: unique email, unique NIK, unique BPJS numbers âœ…
  - [x] Photo upload handling âœ…
  - [x] Set approver for employee âœ…

- [x] **S4-06**: Implement Employee pages âœ…
  - [x] Create templates/employee/list.html (pagination, search, filter) âœ…
  - [x] Create templates/employee/form.html (multi-section form) âœ…
  - [x] Create templates/employee/detail.html (view employee details) âœ…
  - [x] Photo upload functionality âœ…

- [x] **S4-07**: Create EmployeeController âœ…
  - [x] List employees with pagination âœ…
  - [x] Create/edit employee form âœ…
  - [x] View employee detail âœ…
  - [x] Upload/delete photo âœ…
  - [x] Set approver âœ…
  - [x] Delete employee (soft delete) âœ…

- [x] **S4-08**: Update progress tracking âœ…

---

### ğŸ†• Sprint 2 Bonus: Approval System Implementation âœ… COMPLETED

#### Approval Service & Related
- [x] **S2-BONUS-01**: Create ApprovalService âœ…
  - [x] getApprover(Employee requester, LeaveRequest request) âœ…
  - [x] getNextApprover(Employee currentApprover, LeaveRequest request) âœ…
  - [x] canApprove(Employee approver, Employee requester) âœ…
  - [x] isDepartmentHead(Employee employee) âœ…
  - [x] isDepartmentHeadOf(Employee employee, Department department) âœ…
  - [x] isParentDepartmentHeadOf(Employee employee, Department department) âœ…
  - [x] setCurrentApprover(LeaveRequest request) âœ…
  - [x] isApprovalComplete(LeaveRequest request) âœ…

- [x] **S2-BONUS-02**: Create LeaveRequest model âœ…
  - [x] Create LeaveRequest.java with approval fields âœ…
  - [x] Add current_approver_id field âœ…
  - [x] Add helper methods (approve, reject, isShortLeave) âœ…

- [x] **S2-BONUS-03**: Database Migration V5 âœ…
  - [x] Add parent_id, head_id to departments âœ…
  - [x] Add level to positions âœ…
  - [x] Add approver_id to employees âœ…
  - [x] Add current_approver_id to leave_requests âœ…
  - [x] Fix audit columns in leave_requests âœ…
  - [x] Fix Flyway migration history âœ…

---

### ğŸ†• Sprint 4 Bonus: Employee History System âœ… COMPLETED

#### Employee History Tracking
- [x] **S4-BONUS-01**: Database Migration V6-V8 - Employee History Tables âœ…
  - [x] V6__add_employee_history.sql - Create employee_job_history & salary_history tables âœ…
  - [x] V7__add_soft_delete_to_history_tables.sql - Add soft delete columns âœ…
  - [x] V8__add_end_date_to_salary_history.sql - Add end_date for salary periods âœ…
  - [x] Add change_type ENUM columns for both tables âœ…

- [x] **S4-BONUS-02**: Create ChangeType & SalaryChangeType Enums âœ…
  - [x] ChangeType.java (INITIAL, PROMOTION, DEMOTION, TRANSFER, RESIGNATION, RENEWAL, STATUS_CHANGE) âœ…
  - [x] SalaryChangeType.java (INITIAL, INCREASE, DECREASE, PROMOTION, DEMOTION, ANNUAL_REVIEW, ADJUSTMENT, RENEWAL) âœ…
  - [x] Add displayName property with Indonesian labels (e.g., "Kenaikan Jabatan", "Mutasi") âœ…

- [x] **S4-BONUS-03**: Create EmployeeJobHistory Model âœ…
  - [x] EmployeeJobHistory.java entity extending AuditableEntity âœ…
  - [x] Fields: employee, department, position, change_type, change_reason âœ…
  - [x] effective_date, end_date, is_current, salary_at_time âœ…
  - [x] Helper methods: isCurrent(), getJobDuration() âœ…
  - [x] @ToString.Exclude on lazy fields âœ…

- [x] **S4-BONUS-04**: Create SalaryHistory Model âœ…
  - [x] SalaryHistory.java entity extending BaseEntity âœ…
  - [x] Fields: employee, old_salary, new_salary, salary_difference âœ…
  - [x] change_type, change_reason, effective_date, end_date âœ…
  - [x] job_history (ManyToOne reference), created_by âœ…
  - [x] Helper methods: isIncrease(), isDecrease(), isInitialSalary(), isCurrentSalary(), getPercentageChange() âœ…
  - [x] @ToString.Exclude on lazy fields âœ…

- [x] **S4-BONUS-05**: Create History Repositories âœ…
  - [x] EmployeeJobHistoryRepository âœ…
  - [x] SalaryHistoryRepository âœ…
  - [x] Custom queries: findByEmployeeIdOrderByEffectiveDateDesc() âœ…
  - [x] findCurrentByEmployeeId(), findLatestByEmployeeId() âœ…

- [x] **S4-BONUS-06**: Create History Services âœ…
  - [x] EmployeeJobHistoryService âœ…
    - [x] recordJobHistory() - record job changes with auto-end previous âœ…
    - [x] recordNewHire() - initial job history for new employee âœ…
    - [x] recordPromotion(), recordDemotion(), recordTransfer() âœ…
    - [x] recordResignation() - handle resignation with end date âœ…
  - [x] SalaryHistoryService âœ…
    - [x] recordSalaryChange() - record salary changes with auto-end previous âœ…
    - [x] recordInitialSalary() - initial salary for new hire âœ…
    - [x] recordSalaryIncrease(), recordSalaryDecrease() âœ…
    - [x] recordPromotionSalary() - promotion salary adjustment âœ…
    - [x] getTotalSalaryIncrease() - calculate total increase over time âœ…
    - [x] getLatestSalary(), getEmployeeSalaryHistory() âœ…

- [x] **S4-BONUS-07**: Update EmployeeService for Auto-History Recording âœ…
  - [x] Auto-record initial job & salary history on create employee âœ…
  - [x] Auto-record job history on department/position changes (update) âœ…
  - [x] Auto-record salary history on salary changes (update) âœ…
  - [x] Auto-record resignation history when status changes to RESIGNED âœ…
  - [x] Link salary history to job history when related âœ…

- [x] **S4-BONUS-08**: Create History Controllers âœ…
  - [x] JobHistoryController with @PreAuthorize("hasAnyRole('ADMIN', 'HR')") âœ…
    - [x] viewJobHistory(employeeId, model) - timeline view page âœ…
  - [x] SalaryHistoryController with @PreAuthorize("hasAnyRole('ADMIN', 'HR')") âœ…
    - [x] viewSalaryHistory(employeeId, model) - timeline view page âœ…

- [x] **S4-BONUS-09**: Create History UI Pages âœ…
  - [x] templates/employee/job-history.html âœ…
    - [x] Summary cards: Total Jobs, Current Position, Department âœ…
    - [x] Timeline view with color-coded icons per change type âœ…
    - [x] Display department, position, salary_at_time âœ…
    - [x] Effective date and end date (or "Sekarang" for current) âœ…
    - [x] Change reason and created_at timestamp âœ…
  - [x] templates/employee/salary-history.html âœ…
    - [x] Summary cards: Current Salary, Total Increase, Total Changes âœ…
    - [x] Timeline view with color-coded icons per change type âœ…
    - [x] Display old_salary, new_salary, salary_difference âœ…
    - [x] Percentage change calculation & display âœ…
    - [x] Period display (effective_date - end_date or "Sekarang") âœ…
  - [x] Add links to history pages from employee detail page âœ…

- [x] **S4-BONUS-10**: Fix Date Format Issues âœ…
  - [x] Add LocalDate formatter in WebConfig.java (yyyy-MM-dd for HTML5 date input) âœ…
  - [x] Fixes dateOfBirth and hireDate being reset in edit form âœ…

- [x] **S4-BONUS-11**: Fix Salary Format Issues âœ…
  - [x] Fix salary input JavaScript - remove division by 100 bug âœ…
  - [x] Use blur/focus approach for salary formatting (user types raw number, format on blur) âœ…
  - [x] Change salary display from currency format to integer format âœ…
  - [x] Use #numbers.formatInteger(..., 3, 'COMMA') instead of #numbers.formatCurrency() âœ…
  - [x] Fixes salary amounts not matching input values in history pages âœ…

- [x] **S4-BONUS-12**: Fix Thymeleaf Template Parsing Issues âœ…
  - [x] Fix multi-line ternary expressions in job-history.html âœ…
  - [x] Fix nested ${} wrappers in th:if conditions âœ…
  - [x] Fix string concatenation in salary-history.html âœ…
  - [x] Use separate th:if blocks instead of complex ternary expressions âœ…

---

### ğŸ†• Sprint 4 Bonus: Contract Management System âœ… COMPLETED

#### Contract & Employment Status History Tracking
- [x] **S4-BONUS-13**: Database Migration V9 - Contract History Table âœ…
  - [x] V9__create_contract_history.sql - Create contract_history table âœ…
  - [x] Fields: employee_id, change_type, old_status, new_status âœ…
  - [x] start_date, end_date, permanent_appointment_date âœ…
  - [x] contract_number, reason, notes, soft delete support âœ…
  - [x] Indexes for performance optimization âœ…

- [x] **S4-BONUS-14**: Create EmploymentStatusChange Enum âœ…
  - [x] EmploymentStatusChange.java with 10 change types âœ…
  - [x] INITIAL_HIRING, PROBATION_TO_CONTRACT, PROBATION_TO_PERMANENT âœ…
  - [x] CONTRACT_TO_PERMANENT, CONTRACT_RENEWAL, CONTRACT_EXPIRED âœ…
  - [x] RESIGNATION, TERMINATION, RETIREMENT, STATUS_CHANGE âœ…
  - [x] displayName property with Indonesian labels âœ…

- [x] **S4-BONUS-15**: Create ContractHistory Model âœ…
  - [x] ContractHistory.java entity extending AuditableEntity âœ…
  - [x] All fields from database schema âœ…
  - [x] Helper methods: isContractPeriod(), isPermanentAppointment() âœ…
  - [x] isContractRenewal(), isExpired(), isCurrent() âœ…
  - [x] getDurationInDays(), getDurationInMonths() âœ…

- [x] **S4-BONUS-16**: Create ContractHistoryRepository âœ…
  - [x] findByEmployeeIdAndDeletedAtIsNullOrderByStartDateDesc() âœ…
  - [x] findByEmployeeIdAndEndDateIsNullAndDeletedAtIsNullOrderByStartDateDesc() (current status) âœ…
  - [x] findByEmployeeIdAndNewStatusAndDeletedAtIsNullOrderByStartDateDesc() (filter by status) âœ…
  - [x] findPermanentAppointmentHistory() - get all permanent appointments âœ…
  - [x] findExpiringContracts(), findContractsExpiringSoon() âœ…
  - [x] findAllActiveContracts(), hasActiveContract() âœ…
  - [x] countByEmployeeId(), findLatestContractRenewal() âœ…

- [x] **S4-BONUS-17**: Create ContractHistoryService âœ…
  - [x] getContractHistoryByEmployeeId(), getCurrentEmploymentStatus() âœ…
  - [x] getContractPeriods(), getPermanentAppointmentHistory() âœ…
  - [x] createInitialEmployment() - record initial employment for new hire âœ…
  - [x] recordStatusChange() - record any employment status change âœ…
  - [x] recordContractRenewal() - record contract renewal with new dates âœ…
  - [x] recordPermanentAppointment() - record conversion to permanent employee âœ…
  - [x] getContractsExpiringSoon() - contracts ending within 30 days âœ…
  - [x] getAllActiveContracts(), hasActiveContract() âœ…
  - [x] updateContractHistory(), deleteContractHistory() (soft delete) âœ…
  - [x] Auto-ends previous status when recording new status âœ…

- [x] **S4-BONUS-18**: Create ContractHistoryController âœ…
  - [x] showContractHistory(employeeId, model) - timeline view page âœ…
  - [x] showStatusChangeForm(employeeId, model) - form to add status change âœ…
  - [x] processStatusChange() - handle form submission âœ…
  - [x] showEditForm(), updateContractHistory() - edit history record âœ…
  - [x] deleteContractHistory() - soft delete history record âœ…
  - [x] getContractHistoryApi() - JSON API for AJAX calls âœ…
  - [x] @PreAuthorize("hasAnyRole('ADMIN', 'HR')") security âœ…

- [x] **S4-BONUS-19**: Create Contract History UI Page âœ…
  - [x] templates/employee/contract-history.html âœ…
  - [x] Summary cards: Current Status, Permanent Appointment Date, Total Changes, Contract Periods âœ…
  - [x] Timeline view with color-coded icons per change type âœ…
    - [x] Green icon for Permanent Appointment (checkmark) âœ…
    - [x] Blue icon for Contract Renewal (refresh arrow) âœ…
    - [x] Purple icon for Initial Hiring (briefcase) âœ…
    - [x] Gray icon for other changes âœ…
  - [x] Display old_status, new_status, period (start_date - end_date or "Sekarang") âœ…
  - [x] Show contract_number for contract periods âœ…
  - [x] Show permanent_appointment_date for permanent appointments âœ…
  - [x] Display duration in months âœ…
  - [x] Show reason and notes âœ…
  - [x] Add link from employee detail page âœ…

- [x] **S4-BONUS-20**: Update Employee Detail Page âœ…
  - [x] Add "Riwayat Kontrak" card to history section âœ…
  - [x] Update grid from 2 columns to 3 columns âœ…
  - [x] Orange theme for contract history card (calendar icon) âœ…
  - [x] Consistent hover effects with other history cards âœ…

- [x] **S4-BONUS-21**: Employee Status Enhancement - FIRED Status âœ…
  - [x] Add FIRED ("Dipecat") to EmployeeStatus enum âœ…
  - [x] Update employee form to show exit date & reason for RESIGNED/FIRED âœ…
  - [x] Add validation: exit date & reason required for RESIGNED/FIRED statuses âœ…
  - [x] Add FIRED status badge to employee list page (red badge) âœ…
  - [x] Add FIRED status badge to employee detail page âœ…
  - [x] JavaScript: dynamic show/hide exit date & reason fields âœ…

---

## Phase 3: Lecturer Data (Sprint 5-6)

### Sprint 5: Lecturer Profile Management âœ… COMPLETED

#### Lecturer Profile Model âœ… COMPLETED
- [x] **S5-01**: Create LecturerProfile model âœ…
  - [x] Create LecturerProfile.java âœ…
  - [x] Fields: employee_id (FK), nidn, last_education, expertise âœ…
  - [x] Lecturer rank (Asisten Ahli, Lektor, Lektor Kepala, Profesor) âœ…
  - [x] Employment status (DOSEN_TETAP, DOSEN_TIDAK_TETAP) âœ…
  - [x] Work status (ACTIVE, LEAVE, RETIRED) âœ…
  - [x] Homebase prodi (department_id FK where is_prodi=true) âœ…
  - [x] Soft delete support âœ…

- [x] **S5-02**: Create LecturerProfileRepository âœ…
  - [x] findByEmployeeIdAndDeletedAtIsNull() âœ…
  - [x] findByNidnAndDeletedAtIsNull() âœ…
  - [x] findByHomebaseProdiIdAndDeletedAtIsNull() âœ…
  - [x] findByEmploymentStatusAndWorkStatus() âœ…
  - [x] findAllActive() with LEFT JOIN FETCH for all relationships âœ…
  - [x] searchLecturers() with filters âœ…
  - [x] findByIdWithEmployee() to avoid LazyInitializationException âœ…
  - [x] Count queries: countByHomebaseProdiIdAndDeletedAtIsNull(), countByEmploymentStatusAndDeletedAtIsNull(), countByWorkStatusAndDeletedAtIsNull(), countByDeletedAtIsNull() âœ…

- [x] **S5-03**: Create LecturerService âœ…
  - [x] CRUD lecturer profile âœ…
  - [x] Validation: NIDN unique âœ…
  - [x] Validate homebase is a prodi department (is_prodi=true) âœ…
  - [x] Get lecturer by ID with employee eagerly fetched âœ…
  - [x] Get lecturer by employee ID âœ…
  - [x] Get lecturer by NIDN âœ…
  - [x] Search lecturers with filters (search, rank, empStatus, workStatus, prodiId) âœ…
  - [x] Get lecturers by homebase prodi âœ…
  - [x] Get lecturers by employment status âœ…
  - [x] Get lecturers by work status âœ…
  - [x] Get lecturers by rank âœ…
  - [x] Count queries for stats âœ…
  - [x] Soft delete implementation âœ…

- [x] **S5-04**: Create LecturerController âœ…
  - [x] List all lecturers with filters âœ…
  - [x] Create lecturer form page âœ…
  - [x] Edit lecturer form page âœ…
  - [x] View lecturer detail page âœ…
  - [x] Delete lecturer (soft delete) âœ…
  - [x] @PreAuthorize("hasAnyRole('ADMIN', 'HR')") security âœ…

- [x] **S5-05**: Implement Lecturer pages âœ…
  - [x] Create templates/lecturer/list.html âœ…
  - [x] Create templates/lecturer/form.html âœ…
  - [x] Create templates/lecturer/detail.html âœ…
  - [x] Filter by employment status, work status, homebase âœ…
  - [x] Stats cards: Total lecturers, Permanent lecturers, Active lecturers âœ…
  - [x] Color-coded badges for rank, employment status, work status âœ…
  - [x] Fixed LazyInitializationException with LEFT JOIN FETCH âœ…
  - [x] Fixed form action (removed #request usage for Thymeleaf Spring 6) âœ…
  - [x] Updated detail page header (larger avatar, better layout, blue theme) âœ…

---

### ğŸ†• Payroll Period Configuration âœ… COMPLETED

#### Company Payroll Period Settings
- [x] **S5-BONUS-01**: Create PayrollPeriodType Enum âœ…
  - [x] Create PayrollPeriodType.java with 6 period types âœ…
  - [x] MONTHLY, HOURLY, WEEKLY, BI_WEEKLY, SEMESTER, DAILY âœ…
  - [x] displayName property with Indonesian labels âœ…
  - [x] description property with explanations âœ…

- [x] **S5-BONUS-02**: Add Payroll Period Fields to Company Model âœ…
  - [x] employeePayrollPeriod (default: MONTHLY) âœ…
  - [x] permanentLecturerPayrollPeriod (default: MONTHLY) âœ…
  - [x] contractLecturerPayrollPeriod (default: HOURLY) âœ…
  - [x] payrollCutoffDate (default: 25) âœ…
  - [x] payrollPaymentDate (default: 1) âœ…

- [x] **S5-BONUS-03**: Database Migration V12 âœ…
  - [x] V12__add_payroll_period_config.sql âœ…
  - [x] Add 5 columns to companies table âœ…
  - [x] Update existing company records with default values âœ…

- [x] **S5-BONUS-04**: Update CompanyController âœ…
  - [x] Add PayrollPeriodType to model in createCompanyForm() âœ…
  - [x] Add PayrollPeriodType to model in editCompanyForm() âœ…
  - [x] Add to validation error handlers âœ…

- [x] **S5-BONUS-05**: Update Company Form & Profile Pages âœ…
  - [x] Add payroll period section to company/form.html âœ…
  - [x] Employee payroll period dropdown âœ…
  - [x] Permanent lecturer payroll period dropdown âœ…
  - [x] Contract lecturer payroll period dropdown âœ…
  - [x] Cutoff date & payment date inputs âœ…
  - [x] Add payroll period display section to company/profile.html âœ…
  - [x] Blue gradient theme with icons âœ…
  - [x] Display all 4 settings with descriptions âœ…

---

### Sprint 6: Lecturer Salary Setup

#### ğŸ†• Shift Management System âœ… COMPLETED
- [x] **S6-01**: Create WorkingHours model âœ…
  - [x] Create WorkingHours.java (name, code, start_time, end_time, break_duration_minutes) âœ…
  - [x] is_off field for non-working days âœ…
  - [x] is_overnight field for shifts across midnight âœ…
  - [x] required_work_hours field âœ…
  - [x] color field for UI display âœ…
  - [x] Soft delete support âœ…

- [x] **S6-02**: Create WorkingHoursRepository & Service âœ…
  - [x] WorkingHoursRepository with standard queries âœ…
  - [x] WorkingHoursService (CRUD operations) âœ…
  - [x] WorkingHoursController (list, create, edit, delete) âœ…
  - [x] templates/working-hours/list.html âœ…
  - [x] templates/working-hours/form.html âœ…

- [x] **S6-03**: Create ShiftPackage model âœ…
  - [x] ShiftPackage.java (name, code, description, display_order, color) âœ…
  - [x] Working hours per day (sunday_working_hours_id, monday_working_hours_id, etc.) âœ…
  - [x] Helper methods: getWorkingHoursIdByDay(), isWorkingDay(), getWorkingDaysPerWeek() âœ…
  - [x] ShiftPackageRepository with getAllShiftPackagesWithWorkingHours() âœ…
  - [x] ShiftPackageService âœ…
  - [x] ShiftPackageController (list, create, edit, delete) âœ…
  - [x] templates/shift-package/list.html âœ…
  - [x] templates/shift-package/form.html âœ…

- [x] **S6-04**: Create ShiftPattern model âœ…
  - [x] ShiftPattern.java (name, code, description, shift_package_id) âœ…
  - [x] ShiftType enum (FIXED, FLEXIBLE, ROTATING) âœ…
  - [x] Permission fields: is_overtime_allowed, is_wfh_allowed, is_attendance_mandatory âœ…
  - [x] Tolerance settings: late_tolerance_minutes, early_leave_tolerance_minutes âœ…
  - [x] Deduction settings: late_deduction_per_minute, underwork_deduction_per_minute âœ…
  - [x] Holiday override settings âœ…
  - [x] Color field for UI display âœ…
  - [x] ShiftPatternRepository âœ…
  - [x] ShiftPatternService with getShiftPatternByIdWithShiftPackage() âœ…
  - [x] ShiftPatternController (list, create, edit, delete) âœ…
  - [x] templates/shift-pattern/list.html âœ…
  - [x] templates/shift-pattern/form.html âœ…

- [x] **S6-05**: Create EmployeeShiftSetting model (Shift Assignment) âœ…
  - [x] EmployeeShiftSetting.java (employee_id, shift_pattern_id, effective_from, effective_to) âœ…
  - [x] Auto-close previous assignment when new one is created âœ…
  - [x] EmployeeShiftSettingRepository with date-based queries âœ…
  - [x] findActiveByEmployeeAndDate() - get active shift for a specific date âœ…
  - [x] findOpenSettingBeforeDate() - for auto-closing âœ…
  - [x] findCurrentActiveByEmployeeId() - get currently active shift âœ…
  - [x] EmployeeShiftService methods: assignShiftPattern(), getActiveShiftPattern() âœ…

- [x] **S6-06**: Create EmployeeShiftSchedule model (Override Schedule) âœ…
  - [x] EmployeeShiftSchedule.java (employee_id, schedule_date, working_hours_id) âœ…
  - [x] Override flags: override_is_wfh, override_is_overtime_allowed, override_attendance_mandatory âœ…
  - [x] EmployeeShiftScheduleRepository âœ…
  - [x] EmployeeShiftService methods: createOverrideSchedule(), deleteOverrideSchedule() âœ…

- [x] **S6-07**: Implement Bulk Assign Shift Pattern âœ…
  - [x] BulkAssignShiftRequest DTO âœ…
  - [x] BulkAssignShiftResult DTO with success/failure/skipped lists âœ…
  - [x] bulkAssignShiftPattern() method with retroactive support âœ…
  - [x] EmployeeShiftController.showBulkAssignForm() page âœ…
  - [x] templates/employee/bulk-assign.html with:
    - [x] Filter by department, current shift pattern, status âœ…
    - [x] Employee list with select all functionality âœ…
    - [x] Shift pattern selection âœ…
    - [x] Effective date, reason, notes fields âœ…
    - [x] Retroactive option (past date assignment) âœ…
    - [x] AJAX loading of filtered employees âœ…
    - [x] Result modal showing success/failure/skipped counts âœ…
  - [x] getFilteredEmployees() API endpoint âœ…
  - [x] executeBulkAssign() API endpoint âœ…

- [x] **S6-08**: Implement Shift Detail Page âœ…
  - [x] EmployeeShiftController.showShiftDetail() page âœ…
  - [x] templates/employee/shift-detail.html with:
    - [x] Back button to bulk assign page âœ…
    - [x] Period selection (month/year dropdowns) âœ…
    - [x] Payroll cutoff date integration (from company settings) âœ…
    - [x] Period calculation based on cutoff date (e.g., Dec 26 - Jan 25) âœ…
    - [x] AJAX schedule loading via getShiftSchedule() API âœ…
    - [x] WeekScheduleDTO and DayScheduleDTO for weekly breakdown âœ…
    - [x] Table columns: Date, Day, Shift Pattern, Clock In, Clock Out, Status âœ…
    - [x] Status badges: Working Day (green), Weekly Off (yellow), Holiday (red), OFF (gray) âœ…
    - [x] Shift pattern name and color display âœ…
    - [x] Working hours display for working days âœ…
    - [x] Loading state and empty state âœ…
  - [x] getShiftScheduleByWeeks() method with weekly organization âœ…
  - [x] buildDayScheduleDTO() with weekly leave detection based on company working days âœ…

- [x] **S6-09**: Database Migrations V13-V15 âœ…
  - [x] V13__add_separate_payroll_dates.sql - Add cutoff & payment dates for each employee type âœ…
  - [x] V14__create_shift_tables.sql - Create working_hours, shift_packages, shift_patterns tables âœ…
  - [x] V15__create_employee_shift_tables.sql - Create employee_shift_settings, employee_shift_schedules tables âœ…

- [x] **S6-10**: Bug Fixes & Improvements âœ…
  - [x] Fixed DayScheduleDTO serialization (changed boolean to Boolean wrapper class) âœ…
  - [x] Fixed shift name display logic (show regardless of working day status) âœ…
  - [x] Fixed weekly leave detection (based on company working days config) âœ…
  - [x] Fixed date format using local timezone instead of UTC âœ…
  - [x] Added shift detail link from bulk assign page âœ…

#### Lecturer Salary Model
- [ ] **S6-11**: Create LecturerSalary model
  - [ ] Create LecturerSalary.java
  - [ ] Fields: lecturer_profile_id (FK), period (YYYY-MM)
  - [ ] Salary components: basic_salary, certification, functional_allowance, teaching_honor, other_allowances
  - [ ] Total salary calculation
  - [ ] Status (DRAFT, PAID)

- [ ] **S6-02**: Create LecturerSalaryRepository
  - [ ] findByLecturerProfileIdAndPeriod()
  - [ ] findByPeriodAndStatus()

- [ ] **S6-03**: Create LecturerSalaryService (preparation only)
  - [ ] Basic CRUD structure
  - [ ] Calculation logic placeholder

- [ ] **S6-04**: Unit testing

---

## Phase 4: Attendance (Sprint 7)

### Attendance Management
- [ ] **S7-01**: Create Attendance model
  - [ ] Create Attendance.java
  - [ ] Fields: employee_id (FK), date, clock_in, clock_out
  - [ ] Status (PRESENT, LATE, LEAVE, SICK, ABSENT)
  - [ ] Notes field
  - [ ] Soft delete support

- [ ] **S7-02**: Create AttendanceRepository
  - [ ] findByEmployeeIdAndDate()
  - [ ] findByEmployeeIdAndDateBetween()
  - [ ] findByDateAndStatus()
  - [ ] findTodayAttendanceByEmployee()

- [ ] **S7-03**: Create AttendanceService
  - [ ] clockIn(employeeId, clockInTime) - validate working hours from Company config
  - [ ] clockOut(employeeId, clockOutTime)
  - [ ] checkLateStatus(clockInTime) - compare with company clock_in_end
  - [ ] getAttendanceHistory(employeeId, month, year)
  - [ ] getMonthlyAttendanceReport(month, year)

- [ ] **S7-04**: Create AttendanceController
  - [ ] Clock in endpoint
  - [ ] Clock out endpoint
  - [ ] Attendance history page

- [ ] **S7-05**: Implement Attendance pages
  - [ ] Create templates/attendance/list.html (calendar view)
  - [ ] Clock in/out buttons on dashboard
  - [ ] Attendance history table
  - [ ] Monthly report (HR/Admin only)

- [ ] **S7-06**: Implement auto status calculation
  - [ ] On clock in: determine PRESENT or LATE based on company config
  - [ ] On clock out: calculate total hours

- [ ] **S7-07**: Unit testing & integration test

---

## Phase 5: Leave Management (Sprint 8)

### Leave Request Management
- [ ] **S8-01**: Create LeaveRequest model
  - [ ] Create LeaveRequest.java
  - [ ] Fields: employee_id (FK), leave_type, start_date, end_date, reason
  - [ ] Status (PENDING, APPROVED, REJECTED)
  - [ ] approved_by (employee_id FK), approved_at
  - [ ] Soft delete support

- [ ] **S8-02**: Create LeaveBalance model
  - [ ] Create LeaveBalance.java
  - [ ] Fields: employee_id (FK), year, annual_total, annual_used, sick_total, sick_used
  - [ ] Unique: employee_id + year
  - [ ] Soft delete support

- [ ] **S8-03**: Create LeaveRequestRepository & LeaveBalanceRepository
  - [ ] findByEmployeeIdAndStatus()
  - [ ] findByStatusOrderByCreatedAtAsc()
  - [ ] findPendingRequests()
  - [ ] findByEmployeeIdAndYear()

- [ ] **S8-04**: Create LeaveRequestService
  - [ ] submitLeaveRequest() - validate balance
  - [ ] approveLeaveRequest() - deduct balance
  - [ ] rejectLeaveRequest()
  - [ ] getLeaveBalance(employeeId, year)
  - [ ] initializeLeaveBalance(employeeId, year)
  - [ ] Calculate leave days

- [ ] **S8-05**: Create LeaveRequestController
  - [ ] My leave requests page
  - [ ] Submit leave request form
  - [ ] Approval page (HR/Admin)
  - [ ] Leave balance display

- [ ] **S8-06**: Implement Leave pages
  - [ ] Create templates/leave/list.html (my requests)
  - [ ] Create templates/leave/form.html (submit request)
  - [ ] Create templates/leave/approval.html (pending approvals for HR/Admin)
  - [ ] Leave balance widget on dashboard

- [ ] **S8-07**: Unit testing & integration test

---

## Phase 6: Payroll Karyawan (Sprint 9)

### Payroll Management
- [ ] **S9-01**: Create Payroll model
  - [ ] Create Payroll.java
  - [ ] Fields: employee_id (FK), period (YYYY-MM)
  - [ ] Components: basic_salary, allowances, overtime, deductions, total_salary
  - [ ] Status (DRAFT, PAID)
  - [ ] Soft delete support

- [ ] **S9-02**: Create PayrollRepository
  - [ ] findByEmployeeIdAndPeriod()
  - [ ] findByPeriodAndStatus()
  - [ ] findByPeriod()

- [ ] **S9-03**: Create PayrollService
  - [ ] generatePayroll(employeeId, period) - generate from employee basic_salary
  - [ ] calculateOvertime(employeeId, period) - from attendance data
  - [ ] calculateDeductions(employeeId, period) - BPJS, PPh21 placeholder
  - [ ] calculateTotalSalary()
  - [ ] generateBatchPayroll(period) - for all employees
  - [ ] markAsPaid()

- [ ] **S9-04**: Create PayrollController
  - [ ] Payroll list page (by period)
  - [ ] Generate payroll form
  - [ ] Payslip view
  - [ ] Batch generate for period

- [ ] **S9-05**: Implement Payroll pages
  - [ ] Create templates/payroll/list.html (filter by period, status)
  - [ ] Create templates/payroll/form.html (single employee)
  - [ ] Create templates/payroll/slip.html (payslip with company stamp)
  - [ ] Add company logo and stamp to payslip

- [ ] **S9-06**: Unit testing & integration test

---

## Phase 7: Payroll Dosen (Sprint 10)

### Lecturer Payroll Management
- [ ] **S10-01**: Complete LecturerSalaryService
  - [ ] generateLecturerSalary(lecturerProfileId, period)
  - [ ] calculateCertificationAllowance()
  - [ ] calculateFunctionalAllowance(rank)
  - [ ] calculateTeachingHonor(credit_hours)
  - [ ] calculateTotalLecturerSalary()
  - [ ] generateBatchLecturerSalary(period)

- [ ] **S10-02**: Create LecturerPayrollController
  - [ ] Lecturer salary list page
  - [ ] Generate lecturer salary form
  - [ ] Lecturer payslip view

- [ ] **S10-03**: Implement Lecturer Payroll pages
  - [ ] Create templates/lecturer/salary-list.html
  - [ ] Create templates/lecturer/salary-form.html
  - [ ] Create templates/lecturer/salary-slip.html
  - [ ] Different format from regular payslip (lecturer components)

- [ ] **S10-04**: Unit testing & integration test

---

## Phase 8: Activity Logging (Sprint 11)

### Activity Logging Implementation
- [ ] **S11-01**: Create UserActivityLog model
  - [ ] Create UserActivityLog.java
  - [ ] Fields: employee_id (FK), activity_type, module_name, entity_type, entity_id
  - [ ] Description, activity_details (JSON), status, error_message
  - [ ] IP address, user agent, timestamp

- [ ] **S11-02**: Create UserActivityLogRepository
  - [ ] findByEmployeeIdOrderByCreatedAtDesc()
  - [ ] findByActivityTypeAndCreatedAtBetween()
  - [ ] findByModuleNameAndEntityId()

- [ ] **S11-03**: Create @LogActivity annotation
  - [ ] Create annotation with: activityType, moduleName, entityName, description
  - [ ] Add AspectJ dependency

- [ ] **S11-04**: Create ActivityLogAspect
  - [ ] @Around advice for @LogActivity
  - [ ] Extract user from session
  - [ ] Capture request metadata (IP, user agent)
  - [ ] Log successful operations (@AfterReturning)
  - [ ] Log failed operations (@AfterThrowing)
  - [ ] Async logging with @Async

- [ ] **S11-05**: Apply @LogActivity to all controllers
  - [ ] AuthController (LOGIN, LOGOUT, ROLE_SELECTION)
  - [ ] EmployeeController (CREATE, READ, UPDATE, DELETE)
  - [ ] DepartmentController, PositionController, CompanyController
  - [ ] LecturerController
  - [ ] AttendanceController (CLOCK_IN, CLOCK_OUT)
  - [ ] LeaveRequestController (SUBMIT_LEAVE, APPROVE_LEAVE, REJECT_LEAVE)
  - [ ] PayrollController, LecturerPayrollController (GENERATE_PAYROLL)
  - [ ] Payroll view (VIEW_SENSITIVE_DATA)

- [ ] **S11-06**: Create ActivityLogController
  - [ ] Activity log viewer (Admin only)
  - [ ] Filter by user, activity type, date range
  - [ ] Export log functionality

- [ ] **S11-07**: Implement Activity Log pages
  - [ ] Create templates/activity-log/list.html
  - [ ] Filterable table
  - [ ] Activity detail modal

- [ ] **S11-08**: Unit testing & integration test

---

## Phase 9: Testing & UAT (Sprint 12)

### Testing & Finalization
- [ ] **S12-01**: End-to-end testing
  - [ ] Test complete user flows
  - [ ] Admin flow: login â†’ manage employees â†’ view reports
  - [ ] HR flow: login â†’ approve leaves â†’ manage attendance
  - [ ] Employee flow: login â†’ clock in/out â†’ request leave â†’ view payslip
  - [ ] Dosen flow: login â†’ clock in/out â†’ view lecturer payslip

- [ ] **S12-02**: Security testing
  - [ ] Test authentication bypass
  - [ ] Test authorization (role-based access)
  - [ ] Test session management
  - [ ] Test SQL injection prevention
  - [ ] Test XSS prevention

- [ ] **S12-03**: Performance testing
  - [ ] Test with 1000+ employees
  - [ ] Test payroll generation performance
  - [ ] Test report generation performance
  - [ ] Optimize slow queries

- [ ] **S12-04**: Bug fixes & refinement
  - [ ] Fix all reported bugs
  - [ ] UI/UX improvements
  - [ ] Code cleanup
  - [ ] Final code review

- [ ] **S12-05**: Documentation
  - [ ] User guide (how to use the system)
  - [ ] Admin guide (how to configure)
  - [ ] Developer documentation
  - [ ] API documentation

- [ ] **S12-06**: Deployment preparation
  - [ ] Create production build
  - [ ] Database migration for production
  - [ ] Environment configuration
  - [ ] Backup strategy

- [ ] **S12-07**: UAT with users
  - [ ] Deploy to staging
  - [ ] User acceptance testing
  - [ ] Collect feedback
  - [ ] Final adjustments

---

## Database Migration Checklist

### Flyway Migrations
- [ ] **V1__init_schema.sql**: Create all tables
  - [ ] companies
  - [ ] employees
  - [ ] employee_roles
  - [ ] user_sessions
  - [ ] departments
  - [ ] positions
  - [ ] lecturer_profiles
  - [ ] lecturer_salaries
  - [ ] attendances
  - [ ] leave_requests
  - [ ] leave_balances
  - [ ] payrolls
  - [ ] user_activity_logs

- [ ] **V2__insert_default_data.sql**: Insert default data
  - [ ] Default company record
  - [ ] Default admin user

---

## Configuration Checklist

### application.yml
- [ ] Database configuration (MySQL)
- [ ] JPA/Hibernate configuration
- [ ] Server port (8080)
- [ ] File upload configuration (max 2MB)
- [ ] Upload directory configuration
- [ ] Session timeout configuration
- [ ] Logging configuration

### Security Configuration
- [ ] Password encoder (BCrypt)
- [ ] Authentication rules
- [ ] Authorization rules (role-based)
- [ ] CSRF configuration
- [ ] CORS configuration

### Web Configuration
- [ ] Static resources handling
- [ ] View resolver (Thymeleaf)
- [ ] Message converter
- [ ] Exception handler

---

## File Structure Verification

### Backend (Java)
- [ ] com.hris.HrisApplication
- [ ] com.hris.config.* (SecurityConfig, WebConfig, RoleConfig)
- [ ] com.hris.controller.* (All controllers)
- [ ] com.hris.service.* (All services)
- [ ] com.hris.repository.* (All repositories)
- [ ] com.hris.model.* (All entities + enums)
- [ ] com.hris.dto.* (All DTOs)
- [ ] com.hris.exception.* (Global exception handler)
- [ ] com.hris.aspect.* (ActivityLogAspect)

### Frontend (Templates)
- [ ] templates/layout/main.html
- [ ] templates/fragments/* (header, sidebar, footer)
- [ ] templates/auth/* (login, role-selection)
- [ ] templates/dashboard/* (admin, hr, employee, dosen)
- [ ] templates/company/* (profile, edit)
- [ ] templates/employee/* (list, form, detail)
- [ ] templates/department/* (list, form)
- [ ] templates/position/* (list, form)
- [ ] templates/lecturer/* (list, profile-form, detail, salary-list, salary-form, salary-slip)
- [ ] templates/attendance/* (list)
- [ ] templates/leave/* (list, form, approval)
- [ ] templates/payroll/* (list, form, slip)
- [ ] templates/activity-log/* (list)

### Static Resources
- [ ] static/css/style.css (custom styles)
- [ ] static/js/app.js (common JavaScript)
- [ ] static/images/* (placeholders)
- [ ] uploads/* (photo storage)

---

## Notes

### Important Implementation Notes
1. **Soft Delete**: Semua query WAJIB filter `WHERE deleted_at IS NULL`
2. **Audit Trail**: Semua operasi CRUD harus log activity
3. **Singleton Company**: Hanya boleh ada 1 record di tabel companies
4. **Multi-Role**: User bisa punya multiple roles, pilih role setelah login
5. **Working Hours**: Gunakan config dari tabel companies untuk hitung terlambat
6. **Leave Balance**: Auto-initialize saat employee baru dibuat
7. **Payslip**: Tampilkan logo dan stamp dari company config

### Testing Priority
- **Critical Path**: Login â†’ Dashboard â†’ Employee Management â†’ Attendance â†’ Leave â†’ Payroll
- **Security**: Authentication, authorization, session management
- **Data Integrity**: Soft delete, audit trail, validations

---

**Last Updated**: 20 Januari 2026 - Completed Sprint 6: Shift Management System (S6-01 to S6-10) - WorkingHours, ShiftPackage, ShiftPattern models with full CRUD; EmployeeShiftSetting for shift assignment with auto-close previous; EmployeeShiftSchedule for override schedules; Bulk Assign Shift Pattern with retroactive support; Shift Detail page with payroll cutoff integration, weekly leave detection, and proper status display; Database migrations V13-V15; Fixed JSON serialization issues (Boolean wrapper class), date format (local timezone), and weekly leave detection based on company working days config
